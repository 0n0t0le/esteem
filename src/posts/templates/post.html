<ion-view view-title="">
	<ion-nav-bar class="bar-positive">
		<ion-nav-back-button>
    	</ion-nav-back-button>
	    <ion-nav-buttons side="left">
	      <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
	    </ion-nav-buttons>
	    <ion-nav-buttons side="right">
	      <button class="button button-icon button-clear ion-android-share-alt" ng-click="share()"></button>
	    </ion-nav-buttons>
	</ion-nav-bar>
  <ion-content class="padding">
  	<p class="title h3">{{$root.$storage.sitem.title}}</p>
  	<p><a href="#" class="subdued"><i class="icon ion-android-time"></i> {{$root.$storage.sitem.last_update|timeago}} by <i class="icon ion-android-person"></i> {{$root.$storage.sitem.author}} in <i class="icon ion-pricetags"></i> {{$root.$storage.sitem.category}}</a></p>
  	<br>
    <div ng-bind-html="$root.$storage.sitem.body | parseUrl">
    </div>
    <br>
    <p>
      <a href="#" class="subdued" ng-click="upvotePost($root.$storage.sitem)" ng-if="!$root.$storage.sitem.upvoted"><i class="icon ion-android-arrow-dropup-circle"></i> {{$root.$storage.sitem.net_votes}}</a>
      <a href="#" class="subdued" ng-click="unvotePost($root.$storage.sitem)" ng-if="$root.$storage.sitem.upvoted"><i class="icon ion-android-arrow-dropup-circle positve"></i> {{$root.$storage.sitem.net_votes}}</a>
      <a href="#" class="subdued" ng-click="downvotePost($root.$storage.sitem)" ng-if="!$root.$storage.sitem.downvoted"><i class="icon ion-android-arrow-dropdown-circle"></i> {{$root.$storage.sitem.active_votes.length-$root.$storage.sitem.net_votes}}</a>
      <a href="#" class="subdued" ng-click="unvotePost($root.$storage.sitem)" ng-if="$root.$storage.sitem.downvoted"><i class="icon ion-android-arrow-dropdown-circle positive"></i> {{$root.$storage.sitem.active_votes.length-$root.$storage.sitem.net_votes}}</a>

      <span class="pull-right"><a href="#" class="subdued"><i class="ion-social-usd"></i> {{$root.$storage.sitem.total_pending_payout_value.split(" ")[0]|number}}</a>|
      <a href="#" class="subdued"><i class="icon ion-chatbubbles"></i> {{$root.$storage.sitem.children}}</a> | <a href="#" class="subdued" ng-click="isreplying(true)" ng-if="$root.$storage.user.username">Reply</a></span>
    </p>
    <div ng-if="replying">
      <textarea ng-model="data.comment" autofocus rows="3" class="boxsizingBorder"></textarea>
      <div class="tcenter"><button class="button button-positive button-small" ng-click="reply($root.$storage.sitem)">Post</button> &nbsp; <button class="button button-small" ng-click="isreplying(false)">Cancel</button></div><br>
    </div>
    <!--<ion-thread comments="comments"></ion-thread>-->
      <div class="list">
        <div class="item comments" ng-repeat="(key, value) in comments | orderBy:'-net_votes'">
          <h2>{{value.author}}</h2>
          <div class="wrap" ng-bind-html="value.body|parseUrl"></div>
          
          <div class="row">
            <div class="col subdued" ng-click="upvotePost(value)">
              <div ng-if="!value.upvoted"><i class="icon ion-android-arrow-dropup-circle gray"></i> <i class="ion-social-usd"></i> {{value.total_pending_payout_value.split(" ")[0]|number}}</div>
              <div ng-if="value.upvoted"><i class="icon ion-android-arrow-dropup-circle positve"></i> <i class="ion-social-usd"></i> {{value.total_pending_payout_value.split(" ")[0]|number}}</div>
            </div>
            <div class="col subdued">
              <div>{{value.net_votes}} votes</div>
            </div>
            <div class="col subdued" ng-click="getReplies(value)">
              <i class="icon ion-chatbubbles"></i> {{value.children}}
            </div>
          </div>
          <!--<div ng-click="downvotePost(value)" ng-if="!value.downvoted"><i class="icon ion-android-arrow-dropdown-circle"></i> {{value.active_votes.length-value.net_votes}}</div>
          <div ng-click="unvotePost(value)" ng-if="value.downvoted"><i class="icon ion-android-arrow-dropdown-circle positive"></i> {{value.active_votes.length-value.net_votes}}</div>-->
        </div>
      </div>
  </ion-content>
</ion-view>
